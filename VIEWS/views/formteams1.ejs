<!DOCTYPE html> 
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Your Team</title>
    <link rel="stylesheet" href="formteams1.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"> 

    
</head>
<body>

<header>
    <div class="logo">
        <img src="logo.jpg.jpeg" alt="no logo">
        <h3>BrainBridges</h3>
    </div>
    <nav>
        <a href="#">Home</a>
        <a href="/myprofile">My Profile</a>
        <a href="messages.html">Messages</a>
        <a href="#">Requests</a>
        <a href="#">Info</a>
        <a href="about.html">About Us</a>
        
    </nav>
    <div class="login-signup-button">

        <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample" aria-controls="offcanvasExample" style="background-color: white; color: black; border:none; ">
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="black" class="bi bi-filter" viewBox="0 0 16 16">
                <path d="M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5m-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5"/>
              </svg>
           
           
        </button>
        
    </div>

</header>
<div class="heading">
    <h1>Form Your Own Team</h1>
           <h3>Powered By BrainBridges</h3>
</div>
<!-- side bar option -->


 
  
  <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="offcanvasExampleLabel">Filters</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <div>
        
      </div>
      <div class="dropdown mt-3">
        <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" style="width:250px; background-color:#d5e6ff;color: rgb(57, 57, 57);">
         Years
        </button>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" href="#">1st</a></li>
          <li><a class="dropdown-item" href="#">2nd</a></li>
          <li><a class="dropdown-item" href="#">3rd</a></li>
          <li><a class="dropdown-item" href="#">4th</a></li>
        </ul>
        <br>
        <br>
        <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" style="width:250px;">
            College
           </button>
           <ul class="dropdown-menu">
             <li><a class="dropdown-item" href="#">Global</a></li>
             <li><a class="dropdown-item" href="#">Within</a></li>
           
           </ul>

           <br>
           <br>

           <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" style="width:250px;">
            Languages
           </button>
           <ul class="dropdown-menu">
             <li><a class="dropdown-item" href="#">Swift</a></li>
             <li><a class="dropdown-item" href="#">Kotlin</a></li>
             <li><a class="dropdown-item" href="#">Javascript</a></li>
             <li><a class="dropdown-item" href="#">Java</a></li>
           </ul>
           <br>
           <br>
      </div>
    </div>
  </div>




    <!-- Search Bar -->
    <div class="search-container">
        <input type="text" id="searchBar" onkeyup="searchFunction()" placeholder="Search for names..">
        <button id="search-button">Search</button>
    </div>

    <div class="container" id="teamContainer">
        <% people.forEach(function(i){ %>
            <div class="box">
                <h2><%= i.name %></h2>
                <p><%= i.skills %></p>
                <div class="button">
                    <button onclick="handleclick('<%= i.user_id%>')" type="button">View More</button>
                    <div class="join">
                        <button type="button" onclick="handlejoin('<%= i.user_id%>')">Join</button>
                    </div>
                </div>
            </div>
        <% }); %>
    </div>

    <script>
        // Sidebar Toggle Functionality
       
        hamburger.addEventListener('click', () => {
            sidebar.classList.toggle('active');
        });

        closeBtn.addEventListener('click', () => {
            sidebar.classList.remove('active');
        });

        // Dropdown Toggle Functionality
        document.querySelectorAll('.dropdown-toggle').forEach(function(toggle) {
            toggle.addEventListener('click', function(event) {
                event.preventDefault();
                const dropdownMenu = this.nextElementSibling;
                dropdownMenu.classList.toggle('show');

                // Close other dropdowns when one is opened
                document.querySelectorAll('.dropdown-menu').forEach(function(menu) {
                    if (menu !== dropdownMenu) {
                        menu.classList.remove('show');
                    }
                });
            });
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            document.querySelectorAll('.dropdown').forEach(function(dropdown) {
                const dropdownMenu = dropdown.querySelector('.dropdown-menu');
                if (!dropdown.contains(event.target)) {
                    dropdownMenu.classList.remove('show');
                }
            });
        });

        // Search Functionality
        function searchFunction() {
            var input, filter, container, boxes, h2, i, txtValue;
            input = document.getElementById('searchBar');
            filter = input.value.toUpperCase();
            container = document.getElementById("teamContainer");
            boxes = container.getElementsByClassName('box');

            for (i = 0; i < boxes.length; i++) {
                h2 = boxes[i].getElementsByTagName("h2")[0];
                txtValue = h2.textContent || h2.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    boxes[i].style.display = "";
                } else {
                    boxes[i].style.display = "none";
                }
            }
        }
// side bar
const hamburger = document.querySelector('.hamburger-menu');
const sidebar = document.getElementById('sidebar');
const closeBtn = document.querySelector('.close-btn');

// Toggle sidebar when hamburger is clicked
hamburger.addEventListener('click', () => {
    sidebar.classList.toggle('active');
});

// Close sidebar when close button is clicked
closeBtn.addEventListener('click', () => {
    sidebar.classList.remove('active');
});

//side bar options
// Object to store selected filters
const filters = {
    year: [],
    skills: [],
    language: [],
    college: []
};

// Handle click event for dropdown toggle
document.querySelector('.dropdown-toggle').addEventListener('click', function(event) {
    event.preventDefault(); // Prevent default link behavior
    const dropdownMenu = document.querySelector('.dropdown-menu');
    
    // Toggle the 'show' class to display/hide the dropdown menu
    dropdownMenu.classList.toggle('show');
});


// Handle click event for dropdown toggle
document.querySelectorAll('.dropdown-toggle').forEach(function(toggle) {
    toggle.addEventListener('click', function(event) {
        event.preventDefault(); // Prevent default link behavior
        const parent = this.parentElement;
        const dropdownMenu = parent.querySelector('.dropdown-menu');
        
        // Toggle the 'show' class to display/hide the dropdown menu
        dropdownMenu.classList.toggle('show');
    });
});

// Close dropdown menu if clicked outside
document.addEventListener('click', function(event) {
    document.querySelectorAll('.dropdown').forEach(function(dropdown) {
        const dropdownMenu = dropdown.querySelector('.dropdown-menu');
        
        if (!dropdown.contains(event.target)) {
            dropdownMenu.classList.remove('show');
        }
    });
});


// Handle click event for dropdown toggle
document.querySelectorAll('.dropdown-toggle').forEach(function(toggle) {
    toggle.addEventListener('click', function(event) {
        event.preventDefault(); // Prevent default link behavior
        const parent = this.parentElement;
        const dropdownMenu = parent.querySelector('.dropdown-menu');
        
        // Toggle the 'show' class to display/hide the dropdown menu
        dropdownMenu.classList.toggle('show');
    });
});

// Close dropdown menu if clicked outside
document.addEventListener('click', function(event) {
    document.querySelectorAll('.dropdown').forEach(function(dropdown) {
        const dropdownMenu = dropdown.querySelector('.dropdown-menu');
        
        if (!dropdown.contains(event.target)) {
            dropdownMenu.classList.remove('show');
        }
    });
});

// Toggle dropdown menu visibility
document.querySelectorAll('.dropdown-toggle').forEach(function(toggle) {
            toggle.addEventListener('click', function(event) {
                event.preventDefault(); // Prevent default link behavior

                // Get the dropdown menu
                const dropdownMenu = this.nextElementSibling;

                // Toggle the 'show' class to display/hide the dropdown menu
                dropdownMenu.classList.toggle('show');

                // Close other dropdowns
                document.querySelectorAll('.dropdown-menu').forEach(function(menu) {
                    if (menu !== dropdownMenu) {
                        menu.classList.remove('show');
                    }
                });
            });
        });

document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
    checkbox.addEventListener('change', () => {
        // Collect selected filters
        let skills = Array.from(document.querySelectorAll('input[name="skills"]:checked')).map(cb => cb.value);
        let languages = Array.from(document.querySelectorAll('input[name="language"]:checked')).map(cb => cb.value);
        let college = Array.from(document.querySelectorAll('input[name="college"]:checked')).map(cb => cb.value);
        
        // Send the selected filters to the backend
        fetch('/filter-users', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ skills, languages, college })
        })
        .then(response => response.json())
        .then(data => {
            // Update the frontend with filtered results
            const container = document.querySelector('.container');
            container.innerHTML = ''; // Clear the existing content

            data.forEach(user => {
                const box = document.createElement('div');
                box.classList.add('box');
                box.innerHTML = `
                    <h2>${user.name}</h2>
                    <p>${user.skills}</p>
                    <p>${user.college}</p>
                    <button type="button">View More</button>
                `;
                container.appendChild(box);
            });
        })
        .catch(error => console.error('Error fetching users:', error));
    });
});


function handleclick(event){
    window.location.href=`/portfolio?id=${event}`;
}

  function handlejoin(e){
    
  
    fetch('/sendrequest', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ id:e })
    })

  }
  

  



    </script>  
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
